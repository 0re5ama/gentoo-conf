##########################
#### Global USE flags ####
##########################

# Processor extensions available in Ivy Bridge
*/* mmx sse sse2 sse3 ssse3 mmxext sse4 sse4_1 sse4_2 avx

# Avoid pulling in sound unless I want it
*/* -alsa -pulseaudio -sound -oss -jack

# Programming language support where possible, customizability
*/* perl python ruby guile -ocaml lua

# Proxy and encryption support
*/* socks socks5 ssl crypt -gnutls sasl gpg polarssl otr

# Support as many media formats as possible
*/* flac theora vorbis ffmpeg mp3 mpeg ogg png jpeg jpeg2k tiff svg jbig wavpack tta

# Why would I want to use libav?
*/* -libav

# Support many compression methods
*/* lzma xz lzo

# Switched to zsh, so I want to prefer both scripts
*/* zsh zsh-completion bash-completion

# Prefer vim over emacs
*/* vim vim-syntax -emacs

# I have no wireless or bluetooth internet
*/* -bluetooth -wifi idn

# Tunneling IPv6 over my other box
*/* ipv6 http2

# Support for version control software where possible
*/* git subversion bazaar cvs darcs mercurial

# Dual monitor support
*/* -xinerama

# Browser choice
*/* firefox -seamonkey

# Support for spelling correction
*/* aspell

# Causes X segfault with fglrx, avoid for now
*/* -xv

# XeTeX is a modern TeX implementation with the best support for Unicode
*/* xetex

# Needed for multi-threading support in many applications
*/* threads caps

# Extra tinfoil security
*/* hardened mem-scramble

# Needed for gcc's -floop optimization flags
#*/* graphite

# Get hibernation support in where possible
*/* acpi

# Compile in LLVM/clang support where applications support it, eg. GHC
*/* llvm clang

# No cups support needed for now
*/* -cups

# Lots of rdeps on ffmpeg
# */* -sdl

# Prefer Qt but don't pull in KDE
*/* -kde -qt4 qt5 qt

# Bloated or unneeded crap
*/* -gstreamer -policykit -consolekit -dbus -udisks -upower
*/* -udev

# Because OpenRC is just even worse.
# Well, as soon as it's supported upstream, anyway
#*/* systemd udev

# For configuration in stuff like dwm/sxiv/whatever
*/* savedconfig

# Make sure we have btrfs and xfs support where possible
*/* btrfs xfs

# I don't want this garbage on my system
*/* -java

# Stuff actually uses this
*/* xattr

# CMS and stuff
*/* littlecms lcms color-management

# Multilib support
*/* abi_x86_32

# Miscellaneous
*/* lzma ncurses fontconfig xft cuda opencl openexr opengl unicode cjk -acl -startup-notification

# Needed for ruby
*/* ruby_targets_ruby22 ruby_targets_ruby23

# As much FS support for gparted as possible
sys-block/gparted btrfs dmraid fat jfs ntfs
sys-block/gparted -dmraid -hfs # requires udev

# For playing around
sys-fs/zfs-kmod -rootfs
sys-fs/zfs -rootfs

############################
#### Media applications ####
############################

# FFmpeg stuff
*/ffmpeg X ass aacplus network ssh alsa v4l opus speex webp x265 vpx openssl -gnutls vdpau dcadec libsoxr modplug librtmp celt bluray
media-video/ffmpeg -hardcoded-tables # build failure
#*/ffmpeg -abi_x86_32

# Hmm...
#x11-libs/cairo -abi_x86_32
#x11-libs/pango -abi_x86_32
#x11-libs/gdk-pixbuf -abi_x86_32
#x11-libs/gtk+ -abi_x86_32

# Alternatives to dmix?
media-plugins/alsa-plugins -pulseaudio -jack speex -libsamplerate
media-sound/pulseaudio alsa -X -gtk libsamplerate
media-sound/jack-audio-connection-kit alsa
media-video/ffmpeg -jack -pulseaudio
media-libs/openal alsa -pulseaudio
net-im/skype -pulseaudio

# Needed for equalizing, apparently
#media-sound/pulseaudio dbus
#dev-python/PyQt4 dbus

# Ensure they actually output sound
media-video/mpv alsa -pulseaudio oss
media-sound/mpd alsa -pulseaudio oss
media-sound/mumble -pulseaudio
media-sound/audacity alsa
games-emulation/dolphin-emu alsa
media-libs/libmikmod alsa
media-libs/libsdl -pulseaudio alsa
app-emulation/wine -pulseaudio -jack alsa -realtime
app-emulation/emul-linux-x86-soundlibs alsa
app-emulation/virtualbox -pulseaudio qt4
media-sound/teamspeak-client-bin alsa -pulseaudio
games-emulation/higan -pulseaudio
media-libs/libsdl sound

# Might be able to run d3
app-emulation/vmware-tools vmware_guest_windows

# Needed for some stupid reason by teamspeak3-client-bin
#dev-qt/qtgui xinerama -dbus
#dev-qt/qtgui:5 -accessibility
dev-qt/qtgui:5 accessibility dbus

# Uh oh, xmonad thinks I have one really big monitor otherwise
dev-haskell/x11 xinerama

# Needed for catalyst
#x11-drivers/ati-drivers qt4 disable-watermark

# Curses mode
#net-misc/electrum -gtk -qt4

# No silly GUI
dev-python/pyside -X -opengl -svg
media-video/mkvtoolnix -wxwidgets

# Needed for espeak
#media-libs/portaudio alsa

# Needed for squishyball
media-libs/libao alsa -pulseaudio

# Don't need its viewing facilities
media-gfx/imagemagick X hdri lqr q32 raw webp fftw

# Hi10P support, essential
media-libs/x264 10bit
media-video/x264-encoder 10bit -mp4

# Slim down mpv a bit
media-video/mpv -a52 -dv dvd dvdnav gif jpeg -live -mng png -quicktime -rar -sdl -shm -speex -xv vdpau
media-video/mpv -luajit # incompatible with PaX

# Extra font candy for libass
media-libs/libass harfbuzz
media-libs/harfbuzz icu

# Needed for games-emulation/mupen64plus
sys-libs/zlib minizip

# Build failure
games-emulation/dolphin-emu -encode
dev-haskell/arithmoi -llvm

# Needed by rust
#sys-devel/llvm multitarget

# Needed for Wii Remote interaction
games-emulation/dolphin-emu bluetooth
net-wireless/bluez test-programs

# Add experimental functionality
media-video/mpv osd-chapters vapoursynth
#media-video/mpv vdpau
#x11-libs/libva vdpau
#media-video/mpv style-override
#media-libs/freetype infinality

# Vapoursynth stuff
media-libs/vapoursynth -imagemagick

# The GUI pulls in too many dependencies
app-emulation/winetricks -gtk -kde

# Needed to get any sort of output
#app-accessibility/espeak portaudio

# Switching to zathura meta packages instead
app-text/zathura-meta pdf cb djvu postscript
app-text/zathura -deprecated

# Social interactions
net-im/bitlbee otr # twitter skype

# Required for sci-electronics/kicad
x11-libs/wxGTK gnome

# Stuff
net-misc/tor scrypt tor-hardening
app-forensics/stegdetect -X

# Needed for IPredator
net-misc/openvpn passwordsave

# Okay, let's try this...
media-libs/phonon -pulseaudio -gstreamer -vlc qt5 qt4
app-office/calligra -handbook -kdepim fftw gsl vc kde
media-gfx/krita -handbook fftw vc
kde-apps/libkexiv2 -xmp
kde-apps/okular -crypt
kde-base/* -handbook -kwallet
kde-apps/* -handbook -kwallet
kde-frameworks/* -handbook -kwallet
dev-libs/libdbusmenu-qt qt4
media-libs/openimageio -gif

app-text/poppler qt4 # for okular
app-crypt/pinentry qt4 -qt5 -gtk

# Needed for qapitrace
dev-util/apitrace qt4

kde-apps/kmix -pulseaudio

#################
#### Firefox ####
#################

# Firefox nightly
#www-client/firefox trunk -webm

# Firefox stable
www-client/firefox minimal -crashreporter -libnotify -startup-notification -webm -ipc -dbus
www-client/firefox jit # manually override this for performance
www-client/firefox gtk3

# Fuck proprietary codecs
www-client/firefox -pulseaudio -gstreamer # actually, fuck audio output even harder
media-plugins/gst-plugins-meta -a52 -aac -cdda -dts -dvd -flac ffmpeg mp3 mpeg -ogg -theora -vorbis -wavpack -x264 -xvid -pulseaudio alsa

# gcc's -O3 is clang's -Ofast, not -O3
www-client/firefox custom-cflags custom-optimization

# JFIF v2 support
www-client/firefox system-jpeg

# Possible alternative?
www-client/seamonkey -chatzilla custom-cflags custom-optimization -roaming

# Who knows what will happen? Let's find out
# Apparently nothing good
#www-client/firefox system-libvpx
#media-libs/libvpx postproc

# Cut down on build times and enable security patches
www-client/firefox system-icu
www-client/firefox -system-cairo # this corrupts on depth 30

# I don't want to see their ugly non-free logo
www-client/firefox bindist

# Profile guided optizimiation
#www-client/firefox pgo
#x11-base/xorg-server xvfb

# Required for USE=system-sqlite
www-client/firefox system-sqlite
dev-db/sqlite secure-delete unlock-notify

# Alternative to firefox?
www-client/palemoon -official-branding alsa


#######################
#### Miscellaneous ####
#######################

# Vim stuff
app-editors/vim cscope vim-pager

# cronie on its own doesn't seem to be very smart
#sys-process/cronie anacron

# For work
app-emulation/lxc doc examples

# Needed for benchmarking
sys-block/fio aio
dev-lang/php curl gd pcntl zip

# Needed for OpenColorIO
sci-libs/hdf5 -threads

# Slimmer KVM/qemu
app-emulation/qemu -curl -jpeg -png -python -vnc -pulseaudio spice usbredir virgl
app-emulation/spice client
net-misc/spice-gtk usbredir gtk3

# Flexible input method
#app-i18n/fcitx gtk3 qt4

# Never upload anything
net-libs/libtorrent noshare
net-p2p/rtorrent color

# Try fixing bitcoind?
#dev-libs/boost mpi icu
dev-libs/leveldb -snappy

# Needed for cjdns
dev-libs/libuv static-libs

# Haddock failures
dev-haskell/type-prelude -doc
dev-haskell/singletons -doc
dev-haskell/transformers-compat -doc
dev-haskell/machines -doc
x11-wm/xmonad -doc

# Required for dev-vcs/git[subversion]
dev-vcs/subversion -dso

# Needed to statically link Haskell programs
dev-libs/gmp static-libs
dev-libs/libffi static-libs

# None of this GUI nonsense needed
app-text/aiksaurus -gtk

# Drop out useless stuff
net-libs/webkit-gtk -geoloc -webgl -introspection

# Compile all haskell libraries for profiling, and enable documentation
dev-haskell/* profile doc hscolour
*/*::gentoo-haskell profile doc hscolour
dev-vcs/darcs profile doc hscolour

# Pull in a useful standard library
sci-mathematics/agda stdlib
sci-mathematics/agda-stdlib -profile

# Required for newer mesa
x11-libs/libdrm libkms
media-libs/mesa gbm opencl
#x11-drivers/xf86-video-ati glamor udev

# Because Gtk+ is a fucking piece of shit and GNOME/Red Hat are morons
x11-libs/libfm -automount

# Tries pulling in ATI drivers?!
sys-apps/hwloc -opencl

# Experimental Haskell editor
app-editors/yi vty -gtk

# Better looking tilde in terminus
media-fonts/terminus-font ceneterd-tilde distinct-l ru-dv du-g ru-i

# rxvt stuff
x11-terms/rxvt-unicode -mousewheel -startup-notification -unicode3 -wcwidth fading-colors vanilla 256-color

# Allows only one GUI
net-analyzer/wireshark -gtk2 -gtk3 qt5 # qt is really slow, but gtk fails building..

# It's trying to pull in alsa
media-libs/libcanberra -udev

# Needed for eudev
sys-apps/hwids udev

# Required to build
x11-base/xorg-server udev -glamor

# Don't pull in dev-haskell/x11-xft
# Update: xmobar needs xft for proper unicode support
#x11-misc/xmobar -xft
#x11-wm/xmonad-contrib -xft

# Pass focusing clicks to windows
x11-wm/xmonad pass-focus-click

# Fails build
dev-lang/go -hardened

# Required for weechat
dev-scheme/guile networking

# Don't need a graphical nmap
net-analyzer/nmap -gtk -lua
net-analyzer/nmap ncat nping

# Full support for the various protocols, needed
app-portage/layman git subversion

# To get gitk
dev-vcs/git tk

# Might be a performance enhancement
sys-apps/portage -pypy2_0 python3_3 -python2_7 -python3_2
app-portage/* -pypy2_0 python3_3 -python2_7 -python3_2

# Get German correction support without getting it anywhere else
app-text/aspell linguas_de
app-text/texlive linguas_de

# Maildir required for xmobar
mail-mta/exim -X maildir

# Required for autoplay
dev-lang/python:2.7 sqlite

# Use the saved configuration file
x11-terms/st savedconfig

# ntfs3g deprecates in-kernel ntfs completely
sys-fs/ntfs3g ntfsprogs

# Required to satisfy berkdb and threads
net-dns/bind dlz geoip

# Required to use mueval (@run and >)
dev-haskell/lambdabot eval

# Required for dragonegg
#sys-devel/gcc lto

# Avoid triggering a rebuild for now
dev-lang/ghc doc

# Use existing GHC installation to build next version
#dev-lang/ghc ghcbootstrap

# Workaround for bug 406399
net-dns/bind -dlz -berkdb -ldap

# Workaround for build error
media-sound/sox -ffmpeg

# Needed for unionfs
sys-fs/aufs3 kernel-patch

# Needed for app-office/libreoffice, among others
app-text/ghostscript-gpl cups

# Needed for IcedTea JDK
#sys-devel/gcc gcj

# Remove binary blobs from the kernel
sys-kernel/*-sources deblob
sys-kernel/*-sources symlink

# Additional codecs for mpd
media-sound/mpd alsa inotify cue libsamplerate musepack mpg123 wavpack -wildmidi mikmod opus ffmpeg
media-libs/sdl-mixer mikmod vorbis mod

# Build issue with media-libs/faad2-2.7-r2
media-sound/mpd -aac

# Build failure
media-sound/audacity -ffmpeg
media-sound/audacity -id3tag -midi -libsamplerate -sbsms -soundtouch -vamp -flac

# Incompatible with clang
sci-libs/fftw -openmp
media-libs/libraw -openmp

# Required by app-emulation/wine
dev-libs/elfutils static-libs

# Drop dbus dependency
app-emulation/wine -udisks

# Lighter dependencies
www-servers/lighttpd -fam

# Needed for steam
gnome-extra/zenity -libnotify -webkit

# Extra client programs
net-libs/polarssl programs

# Why is this even enabled by default?
dev-libs/openssl -tls-heartbeat

# Needed for libreswan
dev-libs/nss utils

# Needed for apcupsd
sys-apps/util-linux tty-helpers

# Crazy build dependencies
dev-vcs/git-annex -assistant -desktop-notify -feed -quvi -s3 -testsuite -webapp -webapp-secure -webdav -xmpp

# Needed by dillo
x11-libs/fltk -cairo

# Prefer sodium
net-im/tox -nacl

# Needs Qt for whatever insane reason, so I run it locally
games-board/cockatrice server

# Not sure which version I want, to be honest
x11-drivers/nvidia-drivers gtk3 uvm # for CUDA
x11-drivers/nvidia-drivers kms
#x11-drivers/nvidia-drivers -multilib # 32-bit version needs relocations
x11-drivers/nvidia-drivers -pax_kernel # I use my own patch
media-video/nvidia-settings -gtk3

#x11-drivers/nvidia-drivers -kms # build failure

# SELinux/hardened stuff
sec-policy/* doc -unconfined
sys-devel/gcc fortran
sys-apps/openrc audit

# For Skype
app-emulation/docker lxc
x11-base/xorg-server xnest xephyr kdrive

# To generate diagrams
net-analyzer/vnstat gd

# kmail testing
kde-apps/kmail -kontact
kde-apps/korganizer -kontact
app-office/akonadi-server qt4 -qt5 mysql -sqlite -postgres
dev-qt/qtsql mysql
dev-db/mariadb client-libs

# Uncategorized
x11-misc/xmobar timezone mail mpd inotify
media-libs/libsamplerate sndfile
games-fps/xonotic alsa -sdl
app-office/libreoffice -vba -webdav -nsplugin
app-arch/p7zip -wxwidgets
dev-libs/libwiimote force tilt
media-libs/libcaca imlib -abi_x86_32 -cxx
dev-util/ltrace unwind

# required by app-misc/anki-2.0.29
# required by anki (argument)
>=dev-python/PyQt4-4.11.2-r1 webkit
# required by dev-qt/qtwebkit-5.4.0::gentoo
# required by qtwebkit (argument)
>=dev-qt/qtcore-5.4.0 icu
# required by dev-qt/qtcore-5.4.0::gentoo
# required by dev-qt/qttranslations-5.4.0::gentoo
# required by qttranslations (argument)
>=dev-libs/libpcre-8.36 pcre16
# required by app-forensics/rkhunter-1.4.2::gentoo
# required by rkhunter (argument)
>=sys-process/lsof-4.88-r1 rpc
# required by dev-lang/rust-1.1.0::rust[system-llvm]
# required by dev-rust/cargo-0.3.0::rust
# required by cargo (argument)
>=sys-devel/llvm-3.6.2 multitarget
# required by app-emulation/qemu-2.4.0::gentoo[-qemu_softmmu_targets_lm32,-qemu_softmmu_targets_mips,-qemu_softmmu_targets_alpha,-qemu_softmmu_targets_mips64,-qemu_softmmu_targets_s390x,-qemu_softmmu_targets_xtensaeb,-qemu_softmmu_targets_mipsel,opengl,-qemu_softmmu_targets_cris,-qemu_softmmu_targets_moxie,-qemu_softmmu_targets_m68k,-qemu_softmmu_targets_xtensa,-qemu_softmmu_targets_or32,-qemu_softmmu_targets_ppcemb,-qemu_softmmu_targets_microblaze,-qemu_softmmu_targets_arm,-qemu_softmmu_targets_sh4eb,-qemu_softmmu_targets_unicore32,-qemu_softmmu_targets_i386,-qemu_softmmu_targets_mips64el,-qemu_softmmu_targets_ppc64,-qemu_softmmu_targets_sparc,-qemu_softmmu_targets_ppc,qemu_softmmu_targets_x86_64,-qemu_softmmu_targets_microblazeel,-qemu_softmmu_targets_sparc64,-qemu_softmmu_targets_aarch64,-static-softmmu,-qemu_softmmu_targets_sh4]
# required by qemu (argument)
>=media-libs/mesa-11.0.0_rc2 gles2
# required by gnome-base/gnome-keyring-3.16.0-r1::gentoo
# required by gnome-base/libgnome-keyring-3.12.0::gentoo
# required by x11-libs/libgksu-2.0.12-r2::gentoo
# required by app-emulation/vmware-player-7.1.2.2780323::gentoo
# required by app-emulation/vmware-modules-304.2::gentoo
>=app-crypt/pinentry-0.9.5 gnome-keyring
# required by kde-base/kdelibs-4.14.13-r1::gentoo[crypt]
# required by kde-apps/kdialog-15.08.0::gentoo
# required by @selected
# required by @world (argument)
>=app-crypt/qca-2.1.1 qt4
# required by net-im/skype-4.3.0.37-r6::gentoo
# required by @selected
# required by @world (argument)
>=dev-qt/qtwebkit-4.8.7:4 -exceptions
# required by media-sound/ncmpcpp-0.7.3::gentoo[unicode]
# required by @selected
# required by @world (argument)
>=dev-libs/boost-1.58.0-r1 icu
# required by sys-auth/polkit-0.113-r1::gentoo
# required by sys-fs/udisks-2.1.6::gentoo
# required by kde-frameworks/solid-5.18.0::gentoo
# required by kde-frameworks/kio-5.18.0::gentoo
# required by kde-frameworks/kdelibs4support-5.18.0::gentoo
# required by kde-apps/gwenview-15.12.1::gentoo
# required by @selected
# required by @world (argument)
>=sys-auth/consolekit-1.0.1 policykit
# required by sys-auth/consolekit-1.0.1::gentoo
# required by sys-auth/polkit-0.113-r1::gentoo
# required by sys-fs/udisks-2.1.6::gentoo
# required by kde-frameworks/solid-5.18.0::gentoo
# required by kde-frameworks/kio-5.18.0::gentoo
# required by kde-frameworks/kdelibs4support-5.18.0::gentoo
# required by kde-apps/gwenview-15.12.1::gentoo
# required by @selected
# required by @world (argument)
>=dev-libs/glib-2.46.2-r1 dbus
# required by dev-python/python-magic-0.4.10::gentoo
# required by mail-client/alot-0.3.7-r1::gentoo
# required by alot (argument)
>=sys-apps/file-5.25 -python
# required by app-editors/neovim-0.1.4::gentoo
# required by dev-python/neovim-python-client-0.1.7::gentoo
>=dev-lua/lpeg-1.0.0-r1 luajit
# required by app-editors/neovim-0.1.4::gentoo
# required by dev-python/neovim-python-client-0.1.7::gentoo
>=dev-lua/mpack-1.0.2 luajit
